@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="text-center">
    <h1 style="font-family: 'Courier New', Courier, monospace; font-size:36px; color:#8B0000; font-weight:bold;">ATT az-2007 live agents</h1>

    <div style="margin-top:20px;">
        <div id="simpleCarousel" class="carousel" style="max-width:900px; width:100%; margin:0 auto; position:relative; overflow:hidden; border:2px solid #ddd; box-shadow:0 2px 6px rgba(0,0,0,0.2);">
            <style>
                /* Carousel styles */
                #simpleCarousel .carousel-track { display:flex; transition:transform 500ms ease; will-change:transform; }
                #simpleCarousel .carousel-slide { min-width:100%; box-sizing:border-box; flex-shrink:0; }
                #simpleCarousel img { display:block; width:100%; height:auto; }
                #simpleCarousel .carousel-indicators { position:absolute; left:50%; transform:translateX(-50%); bottom:10px; display:flex; gap:8px; z-index:3; }
                #simpleCarousel .indicator { width:12px; height:12px; border-radius:50%; background:rgba(255,255,255,0.6); border:1px solid rgba(0,0,0,0.2); cursor:pointer; }
                #simpleCarousel .indicator.active { background:#8B0000; }
                #simpleCarousel .control { position:absolute; top:50%; transform:translateY(-50%); background:rgba(255,255,255,0.8); border:none; padding:8px 12px; cursor:pointer; z-index:4; }
                #simpleCarousel .control.prev { left:8px; }
                #simpleCarousel .control.next { right:8px; }
                #simpleCarousel .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
            </style>

            <div class="carousel-viewport" style="position:relative;">
                <div class="carousel-track" aria-live="polite">
                    <div class="carousel-slide" role="group" aria-roledescription="slide" aria-label="Slide 1 of 3">
                        <img src="https://picsum.photos/seed/seattle/900/300" alt="Seattle skyline">
                    </div>
                    <div class="carousel-slide" role="group" aria-roledescription="slide" aria-label="Slide 2 of 3">
                        <img src="https://picsum.photos/seed/mountain/900/300" alt="Mountain view">
                    </div>
                    <div class="carousel-slide" role="group" aria-roledescription="slide" aria-label="Slide 3 of 3">
                        <img src="https://picsum.photos/seed/city/900/300" alt="City skyline">
                    </div>
                </div>

                <div class="carousel-indicators" role="tablist" aria-label="Carousel indicators">
                    <button class="indicator" data-index="0" aria-label="Go to slide 1" role="tab"></button>
                    <button class="indicator" data-index="1" aria-label="Go to slide 2" role="tab"></button>
                    <button class="indicator" data-index="2" aria-label="Go to slide 3" role="tab"></button>
                </div>

                <button class="control prev" type="button" aria-label="Previous slide">&larr;<span class="sr-only">Previous</span></button>
                <button class="control next" type="button" aria-label="Next slide">&rarr;<span class="sr-only">Next</span></button>
            </div>
        </div>
    </div>

    <script>
        (function(){
            const carousel = document.getElementById('simpleCarousel');
            const track = carousel.querySelector('.carousel-track');
            const slides = Array.from(carousel.querySelectorAll('.carousel-slide'));
            const indicators = Array.from(carousel.querySelectorAll('.indicator'));
            const prevBtn = carousel.querySelector('.control.prev');
            const nextBtn = carousel.querySelector('.control.next');

            let currentIndex = 0;
            const slideCount = slides.length;
            const intervalMs = 4000;
            let timer = null;

            function updateTrack() {
                const offset = -currentIndex * 100;
                track.style.transform = `translateX(${offset}%)`;
                indicators.forEach((ind, i) => ind.classList.toggle('active', i === currentIndex));
                // update aria-selected for accessibility
                indicators.forEach((ind, i) => ind.setAttribute('aria-selected', i === currentIndex ? 'true' : 'false'));
            }

            function show(index) {
                currentIndex = (index + slideCount) % slideCount;
                updateTrack();
            }

            function next() {
                show(currentIndex + 1);
            }

            function prev() {
                show(currentIndex - 1);
            }

            function startAuto() {
                stopAuto();
                timer = setInterval(next, intervalMs);
            }

            function stopAuto() {
                if (timer) { clearInterval(timer); timer = null; }
            }

            // attach events
            nextBtn.addEventListener('click', () => { next(); startAuto(); });
            prevBtn.addEventListener('click', () => { prev(); startAuto(); });

            indicators.forEach(ind => {
                ind.addEventListener('click', (e) => {
                    const idx = parseInt(ind.getAttribute('data-index'), 10);
                    show(idx);
                    startAuto();
                });
            });

            // pause on hover/focus for accessibility
            carousel.addEventListener('mouseenter', stopAuto);
            carousel.addEventListener('mouseleave', startAuto);
            carousel.addEventListener('focusin', stopAuto);
            carousel.addEventListener('focusout', startAuto);

            // keyboard controls: left/right arrows
            carousel.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') { prev(); startAuto(); }
                if (e.key === 'ArrowRight') { next(); startAuto(); }
            });

            // initialize
            show(0);
            // make carousel focusable for keyboard interaction
            carousel.setAttribute('tabindex', '0');

            // start autoplay
            startAuto();
        })();
    </script>
</div>
